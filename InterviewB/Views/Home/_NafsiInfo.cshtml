@using InterviewB.Models
@model InterviewB.Models.NAFSI_INFO
@{
    var xlow = 0;
    foreach (var ndetails in ViewBag.nafsi_detailsO)
    {
        if (((ndetails as NAFSI_DETAILS).DIM_LEVEL_CODE) == 1) { xlow++; }
    }
}

<div class="my-2  col-6  order-@(ViewBag.order)" id="nafsi-info" data-order="@(ViewBag.order)">
    <div class="card border-0">
        <p class="h3 card-header text-white text-right d-block" data-toggle="collapse" data-target="#nafsi-info-body"
           aria-expanded="true" aria-controls="nafsi-info-body" id="nafsi-info-header">
            الموقف النفسي
            <i class="fa fa-chevron-down persian"></i>
            @if (xlow == 0)
            {
                <span class="badge badge-light text-dark float-left ml-5 p-2">لا يوجد أبعاد منخفضة</span>
            }
            else
            {
                <span class="badge badge-light text-dark float-left ml-5 p-2 arabic">@xlow</span>
            }

        </p>

        <div id="nafsi-info-body" class="collapse show" aria-labelledby="nafsi-info-header">
            <div class="card-body d-flex justify-content-center flex-wrap">

                <!-- n1 -->
                <div class="data-group float-right text-center pl-1 persian d-block" data-toggle="modal" data-target="#nafsi-model">
                    <p class="data-name font-weight-bold mb-0">النفسي</p>
                    <p class="data-value form-control  font-weight-bold arabic bg-light" id="vision">
                        @Model.N1_DATA
                    </p>
                </div>
                <!-- n2 -->
                <div class="data-group float-right text-center pl-1 persian d-block">
                    <p class="data-name font-weight-bold mb-0">نفسي زايد</p>
                    <p class="data-value form-control  font-weight-bold arabic bg-light" id="vision">
                        @Model.N2_DATA
                    </p>
                </div>
                <!-- n3 -->
                <div class="data-group float-right text-center pl-1 persian d-block">
                    <p class="data-name font-weight-bold mb-0">نفسي نهائي</p>
                    <p class="data-value form-control  font-weight-bold arabic bg-light" id="vision">
                        @Model.N3_DATA
                    </p>
                </div>
                <div class="data-group float-right text-center pl-1 persian d-block">
                    <p class="data-name font-weight-bold mb-0">ملحوظة النفسي</p>
                    <p class="data-value form-control  font-weight-bold arabic bg-light" id="vision">
                        @Model.N3_NOTE
                    </p>
                </div>
                <br />

                @if (@Model.N1_CODE != null && xlow != 0)
                {
                    <table class="table col-4  m-auto table-striped table-bordered table-sm">
                        <thead>
                            <tr>
                                <th class="bg-nafsi text-center text-light" scope="col">البعد</th>
                                <th class="bg-nafsi text-center text-light" scope="col">المستوي</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var ndetails in ViewBag.nafsi_detailsO)
                            {
                                if (((ndetails as NAFSI_DETAILS).DIM_LEVEL_CODE) == 1)
                                {
                                    <tr>
                                        <!--LAGNA NAME-->
                                        <td class="text-center" scope="col">@((ndetails as NAFSI_DETAILS).DIM_NAME)</td>
                                        <!--LAGNA STATUS-->
                                        <td class="text-center text-danger" scope="col">@((ndetails as NAFSI_DETAILS).DIM_LEVEL)</td>
                                    </tr>
                                }

                            }
                        </tbody>
                    </table>
                }

            </div>
        </div>
    </div>
</div>


<!-- NAFSI DETAILS Modal -->
<div class="modal fade" id="nafsi-model" tabindex="-1" role="dialog" aria-labelledby="nafsiModel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title font-weight-bolder mx-auto">ابعاد النفسي</h2>
                <span class="close ml-0" data-dismiss="modal" aria-label="Close" aria-hidden="true">
                    <i class="fas fa-window-close"></i>
                </span>
            </div>
            <div class="modal-body d-flex justify-content-center flex-wrap">

                <table class="table col-4  m-auto table-striped table-bordered table-sm">
                    <thead>
                        <tr>
                            <th class="bg-nafsi text-center text-light" scope="col">البعد</th>
                            <th class="bg-nafsi text-center text-light" scope="col">المستوي</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var ndetails in ViewBag.nafsi_detailsO)
                        {
                            <tr>
                                <!--LAGNA NAME-->
                                <td class="text-center" scope="col">@((ndetails as NAFSI_DETAILS).DIM_NAME)</td>
                                <!--LAGNA STATUS-->
                                <td class="text-center text-danger" scope="col">@((ndetails as NAFSI_DETAILS).DIM_LEVEL)</td>
                            </tr>
                        }
                    </tbody>
                </table>



            </div>
        </div>
    </div>
</div>